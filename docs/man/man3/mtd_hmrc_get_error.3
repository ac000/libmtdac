.\" Automatically generated by Pandoc 3.1.11.1
.\"
.TH "mtd_hmrc_get_error" "3" "Jul 23, 2025" "Version 1.2.2" "libmtdac"
.SH NAME
\f[B]mtd_hmrc_get_error\f[R] \- get HMRC endpoint error(s)
.SH LIBRARY
libmtdac, \f[I]\-lmtdac\f[R]
.SH SYNOPSIS
\f[B]#include <libmtdac/mtd.h>\f[R]
.PP
int mtd_hmrc_get_error(const char *json, struct mtd_hmrc_err **mhe);
.IP
.EX
struct mtd_hmrc_err {
        enum mtd_hmrc_error error;
        const char *code;
        const char *msg;
        struct mtd_hmrc_err *next;
};
.EE
.SH DESCRIPTION
This function given a JSON request result buffer will return the HMRC
MTD endpoint error code(s) of the last request contained in the buffer.
.TP
\f[B]json\f[R]
A JSON result buffer as returned by the mtd_* functions.
.TP
\f[B]mhe\f[R]
A pointer to a \f[I]struct mtd_hmrc_err\f[R], this will be allocated by
\f[B]mtd_hmrc_get_error(3)\f[R] and should be freed by
\f[B]mtd_hmrc_free_error(3)\f[R].
.RS
.PP
This will either by a single structure for a single error or a linked
list of structures with one structure per error.
.PP
Subsequent structures are linked via the \f[I]\->next\f[R] member.
.PP
See \f[B]mtd_hmrc_err(3type)\f[R] for example usage.
.RE
.SH RETURN VALUE
On success, zero (\f[B]MTD_ERR_NONE\f[R]) is returned.
On error, one of the below errors is returned.
.SH ERRORS
.TP
\f[B]MTD_ERR_OS\f[R]
There was an OS level failure.
Specifically in this case there was a memory allocation failure.
.SH SEE ALSO
\f[B]libmtdac(3)\f[R], \f[B]libmtdac_mtd.h(3)\f[R],
\f[B]mtd_hmrc_free_error(3)\f[R], \f[B]mtd_hmrc_err(3type)\f[R]
