.\" Automatically generated by Pandoc 3.1.11.1
.\"
.TH "mtd_init_creds" "3" "Jun 16, 2025" "Version 1.1.1" "libmtdac"
.SH NAME
\f[B]mtd_init_creds\f[R] \- initialise creds.json
.SH LIBRARY
libmtdac, \f[I]\-lmtdac\f[R]
.SH SYNOPSIS
\f[B]#include <libmtdac/mtd.h>\f[R]
.PP
int mtd_init_creds(enum mtd_api_scope scope);
.SH DESCRIPTION
This function is used to create an initial
\f[B]\[ti]/.config/APP/libmtdac/{prod,test}\-api/creds.json\f[R] file
that contains the users \f[I]client_id\f[R] & \f[I]client_secret\f[R].
.PP
This will prompt the user to enter the above tokens after which the file
will be created.
.PP
This should just be called once during an initial setup routine.
.TP
\f[B]scope\f[R]
is an enum value specifying which Make Tax Digital API this is adding
authorisations for and is one of the following values
.TP
\f[B]MTD_API_SCOPE_ITSA\f[R]
For Income TAX Self\-Assessment
.TP
\f[B]MTD_API_SCOPE_VAT\f[R]
For VAT
.PP
The above can optionally be bitwise \f[B]OR\f[R]\[aq]d with
.TP
\f[B]MTD_API_SCOPE_ADD\f[R]
Which says don\[aq]t reset the oauth.json file when writing it, instead
add this OAuth as another entry (or overwrite an existing entry without
resetting the file).
.SH RETURN VALUE
On success, zero (\f[B]MTD_ERR_NONE\f[R]) is returned.
On error, one of the below errors is returned.
.SH ERRORS
.TP
\f[B]MTD_ERR_OS\f[R]
There was an OS level failure.
.TP
\f[B]MTD_ERR_INVALID_SCOPE\f[R]
Invalid scope was provied.
.TP
\f[B]MTD_ERR_CONFIG_DIR_INVALID\f[R]
The supplied config directory is invalid.
.SH FILES
\[ti]/.config/APP/libmtdac/{prod,test}\-api/creds.json
.SH SEE ALSO
\f[B]libmtdac(3)\f[R], \f[B]libmtdac_mtd.h(3)\f[R]
